"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[82],{57962:function(e,t,n){n.d(t,{Z:function(){return u}});n(67294);var s=n(10520),i=n(76907),a=n(85893),c=(0,i.default)({key:"css",prepend:!0});function u(e){var t=e.injectFirst,n=e.children;return t?(0,a.jsx)(s.C,{value:c,children:n}):n}},50241:function(e,t,n){n.r(t),n.d(t,{default:function(){return y}});var s=n(15861),i=n(87757),a=n.n(i),c=n(67294),u=n(84324),l=n(1329),o=n(7391),r=n(75557),d=n(54641),f=n(56645),v=n(57962),m=n(21243),g=n(21161),h=(n(1073),n(76133)),p=n(5876),N=n.n(p),E=n(68923),x=n(38037),S=n(4382);var j={name:"sg3t40",styles:"display:block;margin:0 auto;border-color:red"},b=function(e){var t,s=e.imageUrl,i=e.eventData,a=e.isSubscribed,u=(0,c.useState)(!0),l=u[0],o=(u[1],(0,c.useState)("#000000")),r=o[0],d=(o[1],(0,c.useState)(0)),f=d[0],p=d[1],b=(0,c.useState)(null),T=b[0],w=b[1],I=(0,c.useState)(null),D=I[0],y=I[1],C=(0,c.useState)(null),O=C[0],U=C[1],L=(0,c.useState)(null),_=L[0],A=L[1],k=(0,c.useState)(!1),F=k[0],V=k[1],Z=(0,c.useState)([]),q=Z[0],B=Z[1],Y=(0,c.useState)(""),G=Y[0],H=Y[1],K=(0,c.useState)(!1),P=K[0],R=K[1],z=(0,c.useState)(!1),M=z[0],Q=z[1];return(0,c.useEffect)((function(){var e=q.concat(a);B(e),e.includes("CYCLE-NOTFOUND")&&e.includes("EVENT-NOTFOUND")&&H("Vous n'êtes pas inscrit à cet événement avec ce compte. Veillez vous connecter avec le bon compte ou acheter cet événement avec ce compte."),(e.includes("CYCLE-FOUND")||e.includes("EVENT-FOUND"))&&H("")}),[a]),(0,c.useEffect)((function(){Q(!0),n(25298).init({once:!0})}),[]),(0,c.useEffect)((function(){t})),(0,c.useEffect)((function(){if(i){var e=new Date,t=parseInt(e.getTime()/1e3);i.date-t<-60*i.duree&&R(!0)}}),[f,i]),(0,c.useEffect)((function(){if(i||V(!1),i){var e=new Date,t=parseInt(e.getTime()/1e3),n=setTimeout((function(){var e=i.date-t;if(V(!0),e<-60*i.duree)V(!1);else{var n=parseInt(e/3600/24),s=parseInt((e-3600*n*24)/3600),a=parseInt((e-3600*n*24-3600*s)/60),c=e-3600*n*24-3600*s-60*a;if(A(n),U(s),y(a),w(c),p((f+1)%10),e<900&&i.outilUrl&&e>-60*i.duree){var u=null==i?void 0:i.outilUrl;if(u){var l="https://www.pekoia.com";l=u.match(/(https:\/\/)\S+/)?u:"https://"+u,console.log("-- DEBUG --"),console.log(l),window.location.href=l}}}}),1e3);return function(){return clearTimeout(n)}}}),[f,i]),(0,S.jsx)(v.Z,{injectFirst:!0},(0,S.jsx)(m.Z,{theme:h.ZP},(0,S.jsx)(g.Z,null,(0,S.jsx)("section",{className:"pt-100 pb-100 bg-light content_26"},(0,S.jsx)("div",{className:"container px-xl-0"},(0,S.jsx)("div",{className:"row justify-content-center"},(0,S.jsx)("div",{className:"col-xl-10 col-lg-11"},(0,S.jsx)("div",{className:"row flex-row-reverse justify-content-between"},(0,S.jsx)("div",{className:"col-md-7 mb-3 mb-md-0"},(0,S.jsx)("div",{className:"relative poster","data-aos":"fade-down","data-aos-delay":"250"},(0,S.jsx)("img",{src:s,alt:"",className:"img-fluid radius10"}))),(0,S.jsx)("div",{className:"col-md-4 h-800"},(0,S.jsx)("div",{className:"mb-20"}," ",G),(0,S.jsx)("div",{className:"mt-15 inner h-80"},!F&&(0,S.jsx)(E.Z,{textAlign:"center"},(0,S.jsx)(N(),{color:r,loading:l,css:j,size:80})),F&&(0,S.jsx)("h2",{className:"f-20 color-heading"},null==i?void 0:i.title1,null!=i&&i.title2?"-":""," ",null==i?void 0:i.title2),F&&(0,S.jsx)("h2",{className:"f-20 color-heading mt-20"},"dans ",_>1?_+" jours ":"",[0,1].includes(_)?_+" jour ":"",O>1?O+"h ":"",[0,1].includes(O)?O+"h ":"",D>1?D+"mn ":"",[0,1].includes(D)?D+"mn ":"",T>1?T+"s":"",[0,1].includes(T)?T+"s":""),(0,S.jsx)("h2",{className:"f-22 mt-40"},F&&!P&&"L'événement n'est pas encore ouvert",P&&"Evénement terminé."),(0,S.jsx)("div",{className:"mt-15 color-heading text-adaptive"},!P&&M&&i&&"Le lien vers l'événement en ligne sera accessible au plus tôt une heure avant l'événement. Nous vous remercions donc de vous reconnecter  via ce même lien quelques minutes avant le début de l'événement."),(0,S.jsx)("button",{onClick:function(){return(0,x.navigate)("/")},className:"btn mt-60 sm border-gray color-main f-16"},"Retour à Pekoia")))))))))))},T=n(22591),w=(n(59694),n(82163),n(17666)),I=n(25024);r.dQ.configure(I.Z);var D=function(e,t,n,s){s(1),u.b.graphql((0,l.wT)(f.EY,{id:e})).then((function(e){var s,i,a=e.data,c="https://www.pekoia.com/static/L"+(null===(s=a.getEvent)||void 0===s?void 0:s.imageKey)+"-500-"+(null===(i=a.getEvent)||void 0===i?void 0:i.imageETag500)+".jpg";t(c),n(a.getEvent)}))},y=function(){var e=(0,c.useState)(null),t=e[0],n=e[1],i=(0,c.useState)(null),r=i[0],v=i[1],m=(0,T.Wd)("inscription",T.Zp),g=m[0],h=(m[1],(0,c.useContext)(o.Vo)),p=h.authState,N=h.authActions,E=(0,c.useState)(!0),x=E[0],j=E[1],I=(0,c.useState)(!1),y=I[0],C=I[1],O=(0,c.useState)(0),U=O[0],L=O[1],_=(0,c.useState)(""),A=_[0],k=_[1],F=(0,c.useState)(!1),V=F[0],Z=F[1],q=function(){var e=(0,s.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.g.currentSession();case 3:C(!0),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),"No current user"!==e.t0&&console.log("GROSS MOSTAKE");case 9:j(!1);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){q()}),[]),(0,c.useEffect)((function(){w.c.record({name:"hubPageVisit"})}),[]);var B=function(e){V||d.g.user&&d.g.currentAuthenticatedUser().then((function(t){var s,i=null==t||null===(s=t.attributes)||void 0===s?void 0:s.sub;i&&u.b.graphql((0,l.wT)(f.TH,{cognitoId:i})).then((function(t){var s,i=t.data,a=null==i||null===(s=i.clientByCognitoId)||void 0===s?void 0:s.items;if(null!=a&&a.length){var c=a[0].id;Z(!0),u.b.graphql((0,l.wT)(f.kT,{clientId:c,limit:1e8})).then((function(t){var s,i=t.data;(null==i||null===(s=i.transactionsByClientId)||void 0===s?void 0:s.items.filter((function(e){return e.cycleId&&"undetermined"!=e.cycleId&&["INITIATING","PROCESSING","SETTLED"].includes(e.status)})).filter((function(e){return e.lemonwayId}))).forEach((function(t){var s=t.cycleId;u.b.graphql((0,l.wT)(f.N,{cycleId:s})).then((function(t){t.data.eventsbyCycle.items.map((function(e){return e.id})).find((function(t){return t===e}))?(D(e,n,v,L),L("CYCLE-FOUND")):L("CYCLE-NOTFOUND")}))}))})).catch((function(e){return console.log(e)})),u.b.graphql((0,l.wT)(f.kT,{clientId:c,limit:1e8})).then((function(t){var s,i=t.data,a=(null==i||null===(s=i.transactionsByClientId)||void 0===s?void 0:s.items).find((function(t){return t.eventId===e}));a||L("EVENT-NOTFOUND"),a&&(L("EVENT-FOUND"),D(e,n,v,L))}))}})).catch((function(e){return console.log(e)}))}))};return(0,c.useEffect)((function(){console.log("@SEARCH"),console.log(g);var e=g;x||y||N.toggleLoginModal(3),!x&&y&&B(e)}),[x,y]),(0,c.useEffect)((function(){2===U&&k("Vous n'êtes pas inscrit à l'événement avec cet identifiant. Veuillez changer de compte ou vous inscrire sur celui-ci.")}),[U]),(0,c.useEffect)((function(){var e,t=g;!x&&null!==(e=p.user)&&void 0!==e&&e.id&&B(t)}),[p]),(0,S.jsx)(b,{imageUrl:t,message:A,eventData:r,isSubscribed:U})}}}]);
//# sourceMappingURL=component---src-pages-hub-js-a53dbb10fbe185be071b.js.map