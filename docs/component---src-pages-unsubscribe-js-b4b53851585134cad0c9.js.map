{"version":3,"file":"component---src-pages-unsubscribe-js-b4b53851585134cad0c9.js","mappings":"oHAgFA,IA7EkB,CACd,mBAAsB,YACtB,6BAAgC,iDAChC,mBAAsB,YACtB,kBAAqB,sBACrB,6BAAgC,6BAChC,MAAS,CACL,OAAU,oEACV,MAAS,CACL,QACA,QACA,SACA,UACA,iCAEJ,eAAkB,0BAClB,gBAAmB,0BACnB,aAAgB,QAEpB,iBAAoB,qBACpB,gCAAmC,CAC/B,SAEJ,6BAAgC,CAC5B,WACA,UAEJ,8BAAiC,CAC7B,SAEJ,8BAAiC,MACjC,sBAAyB,CACrB,OAEJ,yCAA4C,CACxC,wBAA2B,EAC3B,yBAA4B,IAEhC,oCAAuC,CACnC,SAEJ,4BAA+B,iFAC/B,mBAAsB,YACtB,+BAAkC,UAClC,mBAAsB,iCACtB,uBAA0B,CACtB,CACI,KAAQ,mBACR,SAAY,8DACZ,OAAU,aAEd,CACI,KAAQ,gBACR,SAAY,8DACZ,OAAU,aAEd,CACI,KAAQ,aACR,SAAY,8DACZ,OAAU,aAEd,CACI,KAAQ,WACR,SAAY,8DACZ,OAAU,cAGlB,yBAA4B,2DAC5B,gCAAmC,YACnC,4BAA+B,kDAC/B,mCAAsC,YACtC,yBAA4B,wCAC5B,4BAA+B,mCAC/B,gCAAmC,c,6IC7DvCA,EAAAA,GAAAA,UAAkBC,EAAAA,GA+ElB,UA7EuB,WA8DrB,OA5DAC,EAAAA,EAAAA,YAAU,WAER,IAAMC,EAAQC,YAAW,SAAAC,GAIjB,IAAMC,EAAeC,OAAOC,SAASC,OACjCC,EAAe,IAAIC,gBAAgBL,GAEjCM,EAAQF,EAAaG,OAAO,SAAS,GACrCC,EAAMJ,EAAaG,OAAO,OAAO,GAEvCE,QAAQC,IAAI,WACZD,QAAQC,IAAIV,GACZS,QAAQC,IAAIF,GAIZG,EAAAA,EAAAA,SAAYC,EAAAA,EAAAA,IAAiBC,EAAAA,GAAkB,CAAEC,MAAO,CAAEC,KAAM,aAAaC,MAAOV,EAAOE,IAAKA,MAC/FS,MAAK,YAAe,IAAZC,EAAW,EAAXA,KAGPT,QAAQC,IAAI,cACZD,QAAQC,IAAIQ,MAIbC,OAAM,SAAAC,GAAG,OAAIX,QAAQC,IAAIU,QAS/B,KAEH,OAAO,WACLC,aAAaxB,MAKd,KAIHD,EAAAA,EAAAA,YAAU,cAQP,KAIK0B,EAAAA,EAAAA,KAACC,EAAAA,EAAD,CAAKC,MAAM,OAAOC,OAAO,OAAOC,UAAU,OAAOC,QAAQ,OAAOC,cAAc,MAAMC,eAAe,SAASC,aAAa,SAASC,aAAa,SAASC,WAAW,WACzKV,EAAAA,EAAAA,KAAEC,EAAAA,EAAF,CAAMU,aAAa,OAAOT,MAAM,OAAOU,SAAS,QAAQC,QAASC,EAAAA,EAAAA,KAAWC,QAAQ,SAClFf,EAAAA,EAAAA,KAACgB,EAAAA,EAAD","sources":["webpack://gatsby-starter-default/./src/aws-exports.js","webpack://gatsby-starter-default/./src/pages/unsubscribe.js"],"sourcesContent":["/* eslint-disable */\n// WARNING: DO NOT EDIT. This file is automatically generated by AWS Amplify. It will be overwritten.\n\nconst awsmobile = {\n    \"aws_project_region\": \"eu-west-1\",\n    \"aws_cognito_identity_pool_id\": \"eu-west-1:0bbe34f0-1fb5-4c49-9959-129327fc76f2\",\n    \"aws_cognito_region\": \"eu-west-1\",\n    \"aws_user_pools_id\": \"eu-west-1_Jzki3dJSo\",\n    \"aws_user_pools_web_client_id\": \"434pkqbdqo5kenmi6esrkkbi4q\",\n    \"oauth\": {\n        \"domain\": \"pekoiapine655620c5-655620c5-test.auth.eu-west-1.amazoncognito.com\",\n        \"scope\": [\n            \"phone\",\n            \"email\",\n            \"openid\",\n            \"profile\",\n            \"aws.cognito.signin.user.admin\"\n        ],\n        \"redirectSignIn\": \"https://www.pekoia.com/\",\n        \"redirectSignOut\": \"https://www.pekoia.com/\",\n        \"responseType\": \"code\"\n    },\n    \"federationTarget\": \"COGNITO_USER_POOLS\",\n    \"aws_cognito_username_attributes\": [\n        \"EMAIL\"\n    ],\n    \"aws_cognito_social_providers\": [\n        \"FACEBOOK\",\n        \"GOOGLE\"\n    ],\n    \"aws_cognito_signup_attributes\": [\n        \"EMAIL\"\n    ],\n    \"aws_cognito_mfa_configuration\": \"OFF\",\n    \"aws_cognito_mfa_types\": [\n        \"SMS\"\n    ],\n    \"aws_cognito_password_protection_settings\": {\n        \"passwordPolicyMinLength\": 8,\n        \"passwordPolicyCharacters\": []\n    },\n    \"aws_cognito_verification_mechanisms\": [\n        \"EMAIL\"\n    ],\n    \"aws_appsync_graphqlEndpoint\": \"https://zrwo23eclrcztk6vdq5umcieli.appsync-api.eu-west-1.amazonaws.com/graphql\",\n    \"aws_appsync_region\": \"eu-west-1\",\n    \"aws_appsync_authenticationType\": \"API_KEY\",\n    \"aws_appsync_apiKey\": \"da2-q7weyxl4xbgrvb7artz45tnmqq\",\n    \"aws_cloud_logic_custom\": [\n        {\n            \"name\": \"imageUploaderNew\",\n            \"endpoint\": \"https://gatjfusvq5.execute-api.eu-west-1.amazonaws.com/test\",\n            \"region\": \"eu-west-1\"\n        },\n        {\n            \"name\": \"apifetcherNew\",\n            \"endpoint\": \"https://ejyyykumog.execute-api.eu-west-1.amazonaws.com/test\",\n            \"region\": \"eu-west-1\"\n        },\n        {\n            \"name\": \"sandboxNew\",\n            \"endpoint\": \"https://l9mxr306vg.execute-api.eu-west-1.amazonaws.com/test\",\n            \"region\": \"eu-west-1\"\n        },\n        {\n            \"name\": \"rustMock\",\n            \"endpoint\": \"https://hf9krylpf7.execute-api.eu-west-1.amazonaws.com/test\",\n            \"region\": \"eu-west-1\"\n        }\n    ],\n    \"aws_user_files_s3_bucket\": \"pekoiabackend8ec5f64e34684c1fbe7d5944ea50a257164107-test\",\n    \"aws_user_files_s3_bucket_region\": \"eu-west-1\",\n    \"aws_content_delivery_bucket\": \"pekoiabackend-20210705183458-hostingbucket-test\",\n    \"aws_content_delivery_bucket_region\": \"eu-west-1\",\n    \"aws_content_delivery_url\": \"https://d3n4bcfjsepr7a.cloudfront.net\",\n    \"aws_mobile_analytics_app_id\": \"e5d08a0bf63e46cc85b31dc223eaa789\",\n    \"aws_mobile_analytics_app_region\": \"eu-west-1\"\n};\n\n\nexport default awsmobile;\n","import React, { useEffect } from \"react\"\nimport { grey } from '@mui/material/colors'\nimport { API, graphqlOperation } from \"aws-amplify\"\n\nimport Box from '@mui/material/Box'\nimport { Analytics } from 'aws-amplify'\nimport {Amplify} from 'aws-amplify'\nimport {createEventsLogs} from '../graphql/mutations'\n\n\nimport { Typography } from \"@mui/material\"\n\n\nimport awsConfig from '../aws-exports'\n\nAmplify.configure(awsConfig)\n\nconst UnsuscribePage = () => {\n\n  useEffect(() => {\n\n    const timer = setTimeout(_ => {\n\n      if ((process.env.NODE_ENV === \"production\")) {\n\n            const paramsString = window.location.search\n            var searchParams = new URLSearchParams(paramsString)\n\n            const email = searchParams.getAll(\"email\")[0]\n            const key = searchParams.getAll(\"key\")[0]\n\n            console.log('@PARAMS')\n            console.log(paramsString)\n            console.log(key)\n\n          \n\n            API.graphql(graphqlOperation(createEventsLogs, { input: { type: 'UNSUSCRIBE',value: email, key: key } }))\n            .then(({ data }) => {\n    \n\n              console.log('@EVENT-LOG')\n              console.log(data)\n                \n            \n            })\n            .catch(err => console.log(err))\n\n           \n\n         \n\n      }\n\n\n    }, 1000)\n\n    return () => {\n      clearTimeout(timer)\n    }\n\n\n\n  }, [])\n\n\n\n  useEffect(() => {\n\n\n\n\n\n\n\n  }, [])\n\n\n\n  return (<Box width=\"100%\" height=\"100%\" marginTop=\"40vh\" display=\"flex\" flexDirection=\"row\" justifyContent=\"center\" justifyItems=\"center\" alignContent=\"center\" alignItems=\"center\">\n    < Box borderRadius=\"20px\" width=\"100%\" maxWidth=\"450px\" bgcolor={grey[200]} padding=\"30px\">\n      <Typography>\n        Vous nous recevrez plus desormais de newsletter de la part de Pekoia.\n      </Typography>\n\n    </Box>\n\n  </Box>)\n}\n\n\n\n\n\nexport default UnsuscribePage"],"names":["Amplify","awsConfig","useEffect","timer","setTimeout","_","paramsString","window","location","search","searchParams","URLSearchParams","email","getAll","key","console","log","API","graphqlOperation","createEventsLogs","input","type","value","then","data","catch","err","clearTimeout","___EmotionJSX","Box","width","height","marginTop","display","flexDirection","justifyContent","justifyItems","alignContent","alignItems","borderRadius","maxWidth","bgcolor","grey","padding","Typography"],"sourceRoot":""}